# Testing the New Tab Override Feature

## Quick Test Guide

### 1. Build the Extension

```bash
cd apps/extension
pnpm build
```

This will create a production build in `apps/extension/dist/` with the new tab override enabled.

### 2. Load the Extension in Chrome

1. Open Chrome and navigate to `chrome://extensions/`
2. Enable "Developer mode" (toggle in top-right corner)
3. Click "Load unpacked"
4. Select the `apps/extension/dist` folder
5. The extension should now be loaded

### 3. Test New Tab Override

1. **Open a new tab** (`Cmd+T` or `Ctrl+T`)
2. **Expected result**: You should see the Aura dashboard instead of Chrome's default new tab page
3. **Verify**:
   - ✅ Aura dashboard loads
   - ✅ Workspaces and collections are visible
   - ✅ Search works (`Cmd+K` or `Ctrl+K`)
   - ✅ Theme toggle works
   - ✅ All dashboard features work as expected

### 4. Test Dashboard Still Works

1. Click the Aura extension icon in the toolbar
2. Click "Open Dashboard" in the popup
3. **Expected result**: Dashboard opens in a new tab
4. **Verify**: Both new tab and dashboard tab show the same interface

### 5. Test Development Mode

For development, you can test with the dev server:

```bash
cd apps/extension
pnpm dev
```

Then:
1. Load the extension from `apps/extension/dist` (generated by dev server)
2. Open a new tab
3. The new tab should hot-reload when you make changes

**Note**: In dev mode, you might see `http://localhost:5173` URLs in the console, which is normal.

## Troubleshooting

### New tab shows blank page

**Possible causes**:
- Extension not properly loaded
- Build failed or incomplete
- Console errors (check DevTools)

**Solutions**:
1. Check `chrome://extensions/` for errors
2. Rebuild the extension: `pnpm build`
3. Reload the extension
4. Check browser console for errors (F12)

### New tab shows Chrome's default page

**Possible causes**:
- Another extension is overriding the new tab
- Manifest not properly configured
- Extension not enabled

**Solutions**:
1. Check if another extension is overriding new tab
2. Disable other new tab extensions
3. Verify `manifest.json` includes `chrome_url_overrides.newtab`
4. Reload the extension

### Features not working on new tab

**Possible causes**:
- JavaScript errors
- Missing permissions
- Build issues

**Solutions**:
1. Open DevTools (F12) and check Console tab
2. Verify all assets loaded correctly (Network tab)
3. Check if localStorage/IndexedDB is accessible
4. Rebuild and reload extension

## Verification Checklist

- [ ] New tab opens Aura dashboard
- [ ] Search works (`Cmd+K`)
- [ ] Theme toggle works
- [ ] Workspaces are visible
- [ ] Collections are visible
- [ ] Tabs can be opened
- [ ] Auth dialog works (if not logged in)
- [ ] Sync works (if logged in)
- [ ] Offline mode works (disconnect network)
- [ ] No console errors
- [ ] Performance is good (loads quickly)

## Development Testing

### Test with Local API

1. Start the local API:
   ```bash
   pnpm dev:api
   ```

2. Start the extension dev server:
   ```bash
   pnpm dev
   ```

3. Load extension from `dist/`
4. Open new tab
5. Test auth and sync features

### Test Offline

1. Open new tab (Aura dashboard loads)
2. Open DevTools → Network tab
3. Set throttling to "Offline"
4. Refresh the page
5. **Expected**: Dashboard still works with cached data

## Performance Testing

### Measure Load Time

1. Open DevTools → Performance tab
2. Start recording
3. Open new tab
4. Stop recording
5. **Expected**: Dashboard loads in < 1 second

### Check Bundle Size

```bash
cd apps/extension
pnpm build
```

Check the output for bundle sizes:
- `newtab.html` should be < 1 KB
- Shared JS bundles should be code-split
- CSS should be optimized

## Next Steps After Testing

If all tests pass:
1. ✅ Feature is ready for use
2. Consider adding user settings to toggle this feature
3. Add analytics to track new tab usage (optional)
4. Gather user feedback

If tests fail:
1. Check console for errors
2. Verify build output
3. Review manifest configuration
4. Check for conflicts with other extensions

